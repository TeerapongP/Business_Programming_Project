@page
@model Project.Pages.LoginSqlModel
@using MySql.Data.MySqlClient;
@using System.Data;
@{
    var username_login = Request.Form["username-login"];
    var pass_login = Request.Form["pass-login"];

    MySqlConnection conn;
    string server = "localhost";
    string database = "Reservation_Room";
    string uid = "root";
    string password = "12345678";
    string connectionString = "SERVER=" + server + ";" + "DATABASE=" +
    database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";
    conn = new MySqlConnection(connectionString);
    try
    {
        conn.Open();
        <p>ติดต่อฐานข้อมูล</p>
    }
    catch (Exception ex)
    {
        <p>ติดต่อฐานข้อมูลไม่ได้!!!</p>
    }

    string sqlCmd = "SELECT * FROM login_signIn where username='" + username_login + "' AND pass='" + pass_login + "'";
    MySqlCommand cmd = new MySqlCommand(sqlCmd, conn);
    MySqlDataReader dataReader = cmd.ExecuteReader();

    MySqlDataAdapter da = new MySqlDataAdapter(cmd);
    DataTable dt = new DataTable();
    da.Fill(dt);

    if (dt.Rows.Count > 0)
    {
        Response.Redirect("https://www.google.co.th/");
    }
    else
    {
        <p>Sorry, wrong username.</p>
    }
    conn.Close();
}
